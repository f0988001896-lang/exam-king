<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>é†«å¸«äºŒéšåœ‹è€ƒè§£é¡Œç‹ - 114å¹´å…§ç§‘å°ˆå€</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", "Microsoft JhengHei", sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
        }

        .header {
            text-align: center;
            color: white;
            margin-bottom: 40px;
            padding: 20px;
        }

        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }

        .header .subtitle {
            font-size: 1.3em;
            margin: 10px 0;
            font-weight: 600;
        }

        .header p {
            font-size: 1em;
            opacity: 0.9;
            margin-top: 5px;
        }

        .stats-bar {
            background: rgba(255,255,255,0.2);
            backdrop-filter: blur(10px);
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 30px;
            display: flex;
            justify-content: space-around;
            flex-wrap: wrap;
            gap: 15px;
        }

        .stat-item {
            color: white;
            text-align: center;
        }

        .stat-item .number {
            font-size: 2em;
            font-weight: bold;
            display: block;
        }

        .stat-item .label {
            font-size: 0.9em;
            opacity: 0.9;
        }

        .info-banner {
            background: rgba(255,255,255,0.95);
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 30px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }

        .info-banner h3 {
            color: #667eea;
            margin-bottom: 10px;
        }

        .info-banner ul {
            margin-left: 20px;
            color: #374151;
            line-height: 1.8;
        }

        .question-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 20px;
            margin-bottom: 40px;
        }

        .question-card {
            background: white;
            border-radius: 15px;
            padding: 25px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
            transition: transform 0.3s, box-shadow 0.3s;
            cursor: pointer;
            position: relative;
        }

        .question-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 12px rgba(0,0,0,0.2);
        }

        .question-card.unlocked {
            border: 2px solid #10b981;
            background: linear-gradient(to bottom, #ecfdf5 0%, white 100%);
        }

        .question-card.no-video {
            opacity: 0.6;
            cursor: not-allowed;
        }

        .question-card.no-video:hover {
            transform: none;
        }

        .question-number {
            display: inline-block;
            background: #667eea;
            color: white;
            padding: 8px 18px;
            border-radius: 25px;
            font-weight: bold;
            font-size: 1.1em;
            margin-bottom: 15px;
        }

        .question-title {
            font-size: 1.1em;
            font-weight: 600;
            margin-bottom: 15px;
            color: #1f2937;
            line-height: 1.5;
        }

        .question-meta {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: 15px;
            padding-top: 15px;
            border-top: 1px solid #e5e7eb;
        }

        .status-badge {
            padding: 6px 12px;
            border-radius: 15px;
            font-size: 0.85em;
            font-weight: 600;
        }

        .status-badge.ready {
            background: #fbbf24;
            color: #78350f;
        }

        .status-badge.coming-soon {
            background: #e5e7eb;
            color: #6b7280;
        }

        .unlock-btn {
            background: #667eea;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 20px;
            font-weight: bold;
            cursor: pointer;
            transition: background 0.3s;
            font-size: 0.95em;
        }

        .unlock-btn:hover {
            background: #5568d3;
        }

        .unlocked-badge {
            background: #10b981;
            color: white;
            padding: 10px 18px;
            border-radius: 20px;
            font-weight: bold;
            font-size: 0.95em;
        }

        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.7);
            z-index: 1000;
            align-items: center;
            justify-content: center;
        }

        .modal.active {
            display: flex;
        }

        .modal-content {
            background: white;
            border-radius: 20px;
            padding: 40px;
            max-width: 600px;
            width: 90%;
            max-height: 90vh;
            overflow-y: auto;
        }

        .modal-header {
            font-size: 1.5em;
            font-weight: bold;
            margin-bottom: 20px;
            color: #1f2937;
        }

        .payment-info {
            background: #f3f4f6;
            padding: 20px;
            border-radius: 10px;
            margin: 20px 0;
        }

        .payment-info p {
            margin: 10px 0;
            color: #374151;
        }

        .payment-info strong {
            color: #667eea;
        }

        .modal-buttons {
            display: flex;
            gap: 10px;
            margin-top: 20px;
        }

        .btn {
            flex: 1;
            padding: 15px;
            border: none;
            border-radius: 10px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
            font-size: 1em;
        }

        .btn-primary {
            background: #667eea;
            color: white;
        }

        .btn-primary:hover {
            background: #5568d3;
        }

        .btn-secondary {
            background: #e5e7eb;
            color: #374151;
        }

        .btn-secondary:hover {
            background: #d1d5db;
        }

        .video-container {
            margin: 20px 0;
            background: #000;
            border-radius: 10px;
            overflow: hidden;
        }

        .video-container iframe {
            width: 100%;
            height: 350px;
            border: none;
        }

        .video-tips {
            background: #fef3c7;
            border-left: 4px solid #fbbf24;
            padding: 15px;
            margin: 15px 0;
            border-radius: 5px;
        }

        .video-tips p {
            color: #78350f;
            margin: 5px 0;
        }

        @media (max-width: 768px) {
            .header h1 {
                font-size: 1.8em;
            }

            .header .subtitle {
                font-size: 1.1em;
            }

            .question-grid {
                grid-template-columns: 1fr;
            }

            .stats-bar {
                flex-direction: column;
            }

            .modal-content {
                padding: 25px;
            }

            .video-container iframe {
                height: 250px;
            }
        }

        .footer {
            text-align: center;
            color: white;
            padding: 30px;
            opacity: 0.8;
        }

        .admin-note {
            background: rgba(239, 68, 68, 0.1);
            border: 2px dashed #ef4444;
            border-radius: 10px;
            padding: 15px;
            margin: 20px 0;
            color: #991b1b;
        }

        .admin-note strong {
            color: #dc2626;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>ğŸ¥ é†«å¸«äºŒéšåœ‹è€ƒè§£é¡Œç‹</h1>
            <div class="subtitle">114å¹´åº¦å…§ç§‘å°ˆå€</div>
            <p>ç²¾æº–è§£æ Â· éš¨è²·éš¨çœ‹ Â· æ¯é¡Œåªè¦ NT$5</p>
        </div>

        <div class="stats-bar">
            <div class="stat-item">
                <span class="number" id="totalQuestions">10</span>
                <span class="label">é¡Œç›®ç¸½æ•¸</span>
            </div>
            <div class="stat-item">
                <span class="number" id="readyCount">0</span>
                <span class="label">å·²ä¸Šæ¶</span>
            </div>
            <div class="stat-item">
                <span class="number" id="unlockedCount">0</span>
                <span class="label">æˆ‘å·²è§£é–</span>
            </div>
            <div class="stat-item">
                <span class="number" id="totalSpent">$0</span>
                <span class="label">ç´¯ç©æŠ•è³‡</span>
            </div>
        </div>

        <div class="info-banner">
            <h3>ğŸ“š 114å¹´å…§ç§‘è€ƒå¤é¡Œè§£æ</h3>
            <ul>
                <li>âœ… é€é¡Œç²¾æº–è§£æ,ç›´æ“Šè€ƒé»</li>
                <li>âœ… æ¯é¡Œ5å…ƒ,è§£é–å¾Œæ°¸ä¹…è§€çœ‹</li>
                <li>âœ… å½±ç‰‡æ¸…æ™°,è¬›è§£è©³ç´°</li>
                <li>â° é™¸çºŒæ›´æ–°ä¸­,æ•¬è«‹æœŸå¾…!</li>
            </ul>
        </div>

        <div class="question-grid" id="questionGrid">
            <!-- é¡Œç›®å¡ç‰‡å°‡ç”± JavaScript å‹•æ…‹ç”Ÿæˆ -->
        </div>

        <div class="footer">
            <p>Â© 2024 é†«å¸«äºŒéšåœ‹è€ƒè§£é¡Œç‹</p>
            <p style="margin-top: 5px; font-size: 0.9em;">åŠ©ä½ ä¸€è‡‚ä¹‹åŠ›,é †åˆ©é€šéåœ‹è€ƒ ğŸ’ª</p>
        </div>
    </div>

    <!-- ä»˜æ¬¾/è§€çœ‹ Modal -->
    <div class="modal" id="questionModal">
        <div class="modal-content">
            <div class="modal-header" id="modalTitle"></div>
            <div id="modalBody"></div>
            <div class="modal-buttons" id="modalButtons">
                <button class="btn btn-secondary" onclick="closeModal()">é—œé–‰</button>
            </div>
        </div>
    </div>

    <script>
        // é¡Œç›®è³‡æ–™åº«
        // ğŸ“ å¦‚ä½•æ–°å¢å½±ç‰‡: æŠŠå°æ‡‰é¡Œç›®çš„ youtubeId å¾ "" æ”¹æˆä½ çš„YouTubeå½±ç‰‡IDå³å¯
        const questions = [
            {
                id: "114-1",
                year: 114,
                subject: "å…§ç§‘",
                questionNumber: 1,
                title: "114å¹´å…§ç§‘ç¬¬1é¡Œ",
                youtubeId: "7v6fx1L2C24", // âœ… å·²ä¸Šæ¶!
                price: 5
            },
            {
                id: "114-2",
                year: 114,
                subject: "å…§ç§‘",
                questionNumber: 2,
                title: "114å¹´å…§ç§‘ç¬¬2é¡Œ",
                youtubeId: "",
                price: 5
            },
            {
                id: "114-3",
                year: 114,
                subject: "å…§ç§‘",
                questionNumber: 3,
                title: "114å¹´å…§ç§‘ç¬¬3é¡Œ",
                youtubeId: "",
                price: 5
            },
            {
                id: "114-4",
                year: 114,
                subject: "å…§ç§‘",
                questionNumber: 4,
                title: "114å¹´å…§ç§‘ç¬¬4é¡Œ",
                youtubeId: "",
                price: 5
            },
            {
                id: "114-5",
                year: 114,
                subject: "å…§ç§‘",
                questionNumber: 5,
                title: "114å¹´å…§ç§‘ç¬¬5é¡Œ",
                youtubeId: "",
                price: 5
            },
            {
                id: "114-6",
                year: 114,
                subject: "å…§ç§‘",
                questionNumber: 6,
                title: "114å¹´å…§ç§‘ç¬¬6é¡Œ",
                youtubeId: "",
                price: 5
            },
            {
                id: "114-7",
                year: 114,
                subject: "å…§ç§‘",
                questionNumber: 7,
                title: "114å¹´å…§ç§‘ç¬¬7é¡Œ",
                youtubeId: "",
                price: 5
            },
            {
                id: "114-8",
                year: 114,
                subject: "å…§ç§‘",
                questionNumber: 8,
                title: "114å¹´å…§ç§‘ç¬¬8é¡Œ",
                youtubeId: "",
                price: 5
            },
            {
                id: "114-9",
                year: 114,
                subject: "å…§ç§‘",
                questionNumber: 9,
                title: "114å¹´å…§ç§‘ç¬¬9é¡Œ",
                youtubeId: "",
                price: 5
            },
            {
                id: "114-10",
                year: 114,
                subject: "å…§ç§‘",
                questionNumber: 10,
                title: "114å¹´å…§ç§‘ç¬¬10é¡Œ",
                youtubeId: "",
                price: 5
            }
        ];

        // LocalStorage ç®¡ç†
        function getUnlockedQuestions() {
            const unlocked = localStorage.getItem('unlockedQuestions');
            return unlocked ? JSON.parse(unlocked) : [];
        }

        function unlockQuestion(questionId) {
            const unlocked = getUnlockedQuestions();
            if (!unlocked.includes(questionId)) {
                unlocked.push(questionId);
                localStorage.setItem('unlockedQuestions', JSON.stringify(unlocked));
            }
        }

        function isQuestionUnlocked(questionId) {
            return getUnlockedQuestions().includes(questionId);
        }

        // æ›´æ–°çµ±è¨ˆæ•¸æ“š
        function updateStats() {
            const unlockedCount = getUnlockedQuestions().length;
            const readyCount = questions.filter(q => q.youtubeId).length;
            
            document.getElementById('totalQuestions').textContent = questions.length;
            document.getElementById('readyCount').textContent = readyCount;
            document.getElementById('unlockedCount').textContent = unlockedCount;
            document.getElementById('totalSpent').textContent = `$${unlockedCount * 5}`;
        }

        // æ¸²æŸ“é¡Œç›®å¡ç‰‡
        function renderQuestions() {
            const grid = document.getElementById('questionGrid');
            grid.innerHTML = '';

            questions.forEach(question => {
                const isUnlocked = isQuestionUnlocked(question.id);
                const hasVideo = question.youtubeId && question.youtubeId.length > 0;
                
                const card = document.createElement('div');
                card.className = `question-card ${isUnlocked ? 'unlocked' : ''} ${!hasVideo ? 'no-video' : ''}`;
                
                if (hasVideo || isUnlocked) {
                    card.onclick = () => openQuestion(question);
                }

                let actionButton = '';
                if (!hasVideo) {
                    actionButton = '<span class="status-badge coming-soon">ğŸ”œ æº–å‚™ä¸­</span>';
                } else if (isUnlocked) {
                    actionButton = '<span class="unlocked-badge">âœ… å·²è§£é–</span>';
                } else {
                    actionButton = `<button class="unlock-btn" onclick="event.stopPropagation(); openQuestion(questions.find(q => q.id === '${question.id}'))">NT$${question.price} è§£é–</button>`;
                }

                card.innerHTML = `
                    <div class="question-number">${question.id}</div>
                    <div class="question-title">${question.title}</div>
                    <div class="question-meta">
                        ${hasVideo ? '<span class="status-badge ready">ğŸ“¹ å¯è§€çœ‹</span>' : '<span class="status-badge coming-soon">ç­‰å¾…ä¸Šæ¶</span>'}
                        ${actionButton}
                    </div>
                `;

                grid.appendChild(card);
            });
        }

        // é–‹å•Ÿé¡Œç›® Modal
        function openQuestion(question) {
            const hasVideo = question.youtubeId && question.youtubeId.length > 0;
            
            if (!hasVideo) {
                alert('æ­¤é¡Œç›®è§£æå½±ç‰‡å°šæœªä¸Šæ¶,æ•¬è«‹æœŸå¾…! ğŸ™');
                return;
            }

            const modal = document.getElementById('questionModal');
            const modalTitle = document.getElementById('modalTitle');
            const modalBody = document.getElementById('modalBody');
            const isUnlocked = isQuestionUnlocked(question.id);

            modalTitle.textContent = question.title;

            if (isUnlocked) {
                // å·²è§£é– - é¡¯ç¤ºå½±ç‰‡
                modalBody.innerHTML = `
                    <div class="video-tips">
                        <p>ğŸ’¡ <strong>è§€çœ‹æç¤º:</strong></p>
                        <p>â€¢ å»ºè­°å…¨è¢å¹•è§€çœ‹ä»¥ç²å¾—æœ€ä½³å­¸ç¿’æ•ˆæœ</p>
                        <p>â€¢ å¯èª¿æ•´æ’­æ”¾é€Ÿåº¦(YouTubeé½’è¼ªåœ–ç¤º)</p>
                        <p>â€¢ æ­¤é¡Œå·²æ°¸ä¹…è§£é–,éš¨æ™‚å¯å›ä¾†è¤‡ç¿’</p>
                    </div>
                    <div class="video-container">
                        <iframe 
                            src="https://www.youtube.com/embed/${question.youtubeId}?rel=0" 
                            allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" 
                            allowfullscreen>
                        </iframe>
                    </div>
                `;
            } else {
                // æœªè§£é– - é¡¯ç¤ºä»˜æ¬¾é¸é …
                modalBody.innerHTML = `
                    <div class="payment-info">
                        <p><strong>é¡Œç›®:</strong> ${question.title}</p>
                        <p><strong>ç§‘ç›®:</strong> ${question.subject}</p>
                        <p><strong>åƒ¹æ ¼:</strong> NT$${question.price}</p>
                        <p style="margin-top: 15px; color: #6b7280;">ğŸ’° è§£é–å¾Œå¯æ°¸ä¹…è§€çœ‹,ä¸é™æ¬¡æ•¸</p>
                    </div>
                    <p style="margin: 20px 0; color: #6b7280; font-size: 0.95em;">
                        é»æ“Šã€Œå‰å¾€ä»˜æ¬¾ã€å¾Œå°‡å°å‘ç¶ ç•Œé‡‘æµé é¢<br>
                        <span style="font-size: 0.85em;">(ç›®å‰ç‚ºæ¸¬è©¦æ¨¡å¼,é»æ“Šå³å¯è§£é–)</span>
                    </p>
                    <button class="btn btn-primary" id="paymentBtn" style="width: 100%;">
                        ğŸ’³ å‰å¾€ä»˜æ¬¾ NT$${question.price}
                    </button>
                `;
                
                // é‡æ–°ç¶å®šä»˜æ¬¾æŒ‰éˆ•äº‹ä»¶
                setTimeout(() => {
                    const payBtn = document.getElementById('paymentBtn');
                    if (payBtn) {
                        payBtn.onclick = () => processPayment(question.id);
                    }
                }, 0);
            }

            modal.classList.add('active');
        }

        // é—œé–‰ Modal
        function closeModal() {
            document.getElementById('questionModal').classList.remove('active');
        }

        // è™•ç†ä»˜æ¬¾ (ç›®å‰æ˜¯æ¨¡æ“¬,ä¹‹å¾Œä¸²æ¥ç¶ ç•Œ)
        function processPayment(questionId) {
            // TODO: é€™è£¡ä¹‹å¾Œè¦ä¸²æ¥ç¶ ç•ŒAPI
            
            if (confirm('âš ï¸ æ¸¬è©¦æ¨¡å¼\n\næ­£å¼ç‰ˆæœƒè·³è½‰åˆ°ç¶ ç•Œä»˜æ¬¾é é¢\n\nç¾åœ¨è¦æ¨¡æ“¬å®Œæˆä»˜æ¬¾å—?')) {
                unlockQuestion(questionId);
                alert('âœ… ä»˜æ¬¾æˆåŠŸ!é¡Œç›®å·²è§£é–');
                closeModal();
                renderQuestions();
                updateStats();
                
                // é‡æ–°é–‹å•Ÿè©²é¡Œç›®ä»¥é¡¯ç¤ºå½±ç‰‡
                const question = questions.find(q => q.id === questionId);
                setTimeout(() => openQuestion(question), 300);
            }
        }

        // é»æ“Š Modal å¤–éƒ¨é—œé–‰
        document.getElementById('questionModal').addEventListener('click', (e) => {
            if (e.target.id === 'questionModal') {
                closeModal();
            }
        });

        // åˆå§‹åŒ–
        updateStats();
        renderQuestions();

        // é–‹ç™¼è€…å·¥å…· - åœ¨consoleè¼¸å…¥ resetProgress() å¯æ¸…ç©ºå·²è³¼è²·è¨˜éŒ„
        function resetProgress() {
            if (confirm('ç¢ºå®šè¦æ¸…ç©ºæ‰€æœ‰å·²è³¼è²·è¨˜éŒ„å—?')) {
                localStorage.removeItem('unlockedQuestions');
                location.reload();
            }
        }
        console.log('ğŸ’¡ é–‹ç™¼æç¤º: åœ¨consoleè¼¸å…¥ resetProgress() å¯æ¸…ç©ºæ¸¬è©¦è³‡æ–™');
    </script>
</body>
</html>
